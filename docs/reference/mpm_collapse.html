<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Collapse a matrix population model to a smaller number of stages — mpm_collapse • Rage</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Collapse a matrix population model to a smaller number of stages — mpm_collapse" />
<meta property="og:description" content="Collapse a matrix population model to a smaller number of stages. For
instance, to compare properties of multiple projection matrices with
different numbers of stages, one might first collapse those matrices to a
standardized set of stages (e.g. propagule, pre-reproductive, reproductive,
and post-reproductive). The transition rates in the collapsed matrix are a
weighted average of the transition rates from the relevant stages of the
original matrix, weighted by the relative proportion of each stage class
expected at the stable distribution." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a01_GettingStarted.html">Getting started with Rage</a>
    </li>
    <li>
      <a href="../articles/a02_VitalRates.html">Deriving vital rates from an MPM</a>
    </li>
    <li>
      <a href="../articles/a03_LifeHistoryTraits.html">Deriving life history traits from an MPM</a>
    </li>
    <li>
      <a href="../articles/a04_AgeFromStage.html">Age-from-stage analyses</a>
    </li>
    <li>
      <a href="../articles/a05_TernaryPlots.html">Ternary plots</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jonesor/Rage/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Collapse a matrix population model to a smaller number of stages</h1>
    <small class="dont-index">Source: <a href='https://github.com/jonesor/Rage/blob/master/R/mpm_collapse.R'><code>R/mpm_collapse.R</code></a></small>
    <div class="hidden name"><code>mpm_collapse.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Collapse a matrix population model to a smaller number of stages. For
instance, to compare properties of multiple projection matrices with
different numbers of stages, one might first collapse those matrices to a
standardized set of stages (e.g. propagule, pre-reproductive, reproductive,
and post-reproductive). The transition rates in the collapsed matrix are a
weighted average of the transition rates from the relevant stages of the
original matrix, weighted by the relative proportion of each stage class
expected at the stable distribution.</p>
    </div>

    <pre class="usage"><span class='fu'>mpm_collapse</span><span class='op'>(</span><span class='va'>matU</span>, <span class='va'>matF</span>, matC <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>collapse</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>matU</th>
      <td><p>The survival component of a matrix population model (i.e. a
square projection matrix reflecting survival-related transitions; e.g.
progression, stasis, and retrogression)</p></td>
    </tr>
    <tr>
      <th>matF</th>
      <td><p>The sexual component of a matrix population model (i.e. a square
projection matrix reflecting transitions due to sexual reproduction)</p></td>
    </tr>
    <tr>
      <th>matC</th>
      <td><p>The clonal component of a matrix population model (i.e. a square
projection matrix reflecting transitions due to clonal reproduction).
Defaults to <code>NULL</code>, indicating no clonal reproduction (i.e.
<code>matC</code> is a matrix of zeros).</p></td>
    </tr>
    <tr>
      <th>collapse</th>
      <td><p>A list giving the mapping between stages of the original
matrix and the desired stages of the collapsed matrix (e.g. <code><a href='https://rdrr.io/r/base/list.html'>list(1,
2:3, 4)</a></code>). Original stages may be passed as either indices or stage names
corresponding to stage index or name in <code>matU</code>, <code>matF</code> and 
<code>matC</code>). Names given to the elements of <code>collapse</code> are used as 
stage names in the new, collapsed matrix.</p>

<p>See <em>Missing Stages</em> for handling of <code>NA</code> within <code>collapse</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with four elements:</p>
<dt>matA</dt><dd><p>Collapsed projection matrix</p></dd>
  <dt>matU</dt><dd><p>Survival component of the collapsed projection matrix</p></dd>
  <dt>matF</dt><dd><p>Sexual reproduction component of the collapsed projection
  matrix</p></dd>
  <dt>matC</dt><dd><p>Clonal reproduction component of the collapsed projection
  matrix</p></dd>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>This method of collapsing a matrix population model preserves the
  equilibrium population growth rate (\(lambda\)) and relative stable
  distribution, but is not expected to preserve other traits such as relative
  reproductive values, sensitivities, net reproductive rates, life
  expectancy, etc.</p>
    <h2 class="hasAnchor" id="missing-stages"><a class="anchor" href="#missing-stages"></a>Missing Stages</h2>

    

<p>The collapsed matrix will always be of dimension <code><a href='https://rdrr.io/r/base/length.html'>length(collapse)</a></code>,
even if one or more elements of the <code>collapse</code> argument is <code>NA</code>
(corresponding to a desired stage of the collapsed matrix that is not present
in the original matrix). In the collapsed matrix, any row/column
corresponding to a missing stage will be coerced to <code>NA</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Salguero-Gomez, R. &amp; Plotkin, J. B. 2010. Matrix dimensions bias
  demographic inferences: implications for comparative plant demography. The
  American Naturalist 176, 710-722. &lt;doi:10.1086/657044&gt;</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='mpm_standardize.html'>mpm_standardize</a></code></p>
<p>Other transformation: 
<code><a href='mpm_rearrange.html'>mpm_rearrange</a>()</code>,
<code><a href='mpm_split.html'>mpm_split</a>()</code>,
<code><a href='mpm_standardize.html'>mpm_standardize</a>()</code>,
<code><a href='name_stages.html'>name_stages</a>()</code>,
<code><a href='repro_stages.html'>repro_stages</a>()</code>,
<code><a href='standard_stages.html'>standard_stages</a>()</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Rob Salguero-Gómez &lt;rob.salguero@zoo.ox.ac.uk&gt;</p>
<p>William K. Petry &lt;wpetry@ncsu.edu&gt;</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>mpm1</span><span class='op'>)</span>

<span class='co'># check which stages reproductive</span>
<span class='fu'><a href='repro_stages.html'>repro_stages</a></span><span class='op'>(</span>matR <span class='op'>=</span> <span class='va'>mpm1</span><span class='op'>$</span><span class='va'>matF</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    seed   small  medium   large dormant 
#&gt;   FALSE   FALSE    TRUE    TRUE   FALSE </div><div class='input'>
<span class='co'># collapse reproductive stages (3 and 4) into single stage</span>
<span class='fu'>mpm_collapse</span><span class='op'>(</span>matU <span class='op'>=</span> <span class='va'>mpm1</span><span class='op'>$</span><span class='va'>matU</span>, matF <span class='op'>=</span> <span class='va'>mpm1</span><span class='op'>$</span><span class='va'>matF</span>, collapse <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>4</span>, <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $matA
#&gt;      [,1] [,2]        [,3] [,4]
#&gt; [1,] 0.10 0.00 28.54374157 0.00
#&gt; [2,] 0.05 0.12  0.06157494 0.00
#&gt; [3,] 0.00 0.38  0.53448771 0.22
#&gt; [4,] 0.00 0.00  0.14078747 0.17
#&gt; 
#&gt; $matU
#&gt;      [,1] [,2]       [,3] [,4]
#&gt; [1,] 0.10 0.00 0.00000000 0.00
#&gt; [2,] 0.05 0.12 0.06157494 0.00
#&gt; [3,] 0.00 0.38 0.53448771 0.22
#&gt; [4,] 0.00 0.00 0.14078747 0.17
#&gt; 
#&gt; $matF
#&gt;      [,1] [,2]     [,3] [,4]
#&gt; [1,]    0    0 28.54374    0
#&gt; [2,]    0    0  0.00000    0
#&gt; [3,]    0    0  0.00000    0
#&gt; [4,]    0    0  0.00000    0
#&gt; 
#&gt; $matC
#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    0    0    0    0
#&gt; [2,]    0    0    0    0
#&gt; [3,]    0    0    0    0
#&gt; [4,]    0    0    0    0
#&gt; </div><div class='input'>
<span class='co'># use stage names instead, and name stages in the collapsed matrix</span>
<span class='fu'>mpm_collapse</span><span class='op'>(</span>matU <span class='op'>=</span> <span class='va'>mpm1</span><span class='op'>$</span><span class='va'>matU</span>, matF <span class='op'>=</span> <span class='va'>mpm1</span><span class='op'>$</span><span class='va'>matF</span>,
             collapse <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='st'>"seed"</span>, vegetative <span class='op'>=</span> <span class='st'>"small"</span>,
                             flowering <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"medium"</span>, <span class='st'>"large"</span><span class='op'>)</span>,
                             dormant <span class='op'>=</span> <span class='st'>"dormant"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $matA
#&gt;            seed vegetative   flowering dormant
#&gt; seed       0.10       0.00 28.54374157    0.00
#&gt; vegetative 0.05       0.12  0.06157494    0.00
#&gt; flowering  0.00       0.38  0.53448771    0.22
#&gt; dormant    0.00       0.00  0.14078747    0.17
#&gt; 
#&gt; $matU
#&gt;            seed vegetative  flowering dormant
#&gt; seed       0.10       0.00 0.00000000    0.00
#&gt; vegetative 0.05       0.12 0.06157494    0.00
#&gt; flowering  0.00       0.38 0.53448771    0.22
#&gt; dormant    0.00       0.00 0.14078747    0.17
#&gt; 
#&gt; $matF
#&gt;            seed vegetative flowering dormant
#&gt; seed          0          0  28.54374       0
#&gt; vegetative    0          0   0.00000       0
#&gt; flowering     0          0   0.00000       0
#&gt; dormant       0          0   0.00000       0
#&gt; 
#&gt; $matC
#&gt;            seed vegetative flowering dormant
#&gt; seed          0          0         0       0
#&gt; vegetative    0          0         0       0
#&gt; flowering     0          0         0       0
#&gt; dormant       0          0         0       0
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Patrick Barks, Pol Capdevila, Hal Caswell, Judy P. Che-Castaldo, John Jackson, Tamora James, Owen Jones, Sam Levin, William K. Petry, Roberto Salguero-Gomez, Iain Stott, Chelsea C. Thomas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


