<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aggregate a Leslie matrix — leslie_collapse • Rage</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregate a Leslie matrix — leslie_collapse"><meta property="og:description" content="Takes a Leslie matrix and aggregates it to a desired dimension m using least
squares weights equal to the stable age distribution. The output includes the
aggregated matrix, the weight matrix, the original (or expanded) Leslie
matrix raised to the k power, the partitioning matrix, the size of the
original (or expanded) Leslie matrix, the size of the aggregated matrix, the
quotient of the original size divided by the aggregated size, and the
effectiveness of aggregation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a01_GettingStarted.html">Getting started with Rage</a>
    </li>
    <li>
      <a href="../articles/a02_VitalRates.html">Deriving vital rates from an MPM</a>
    </li>
    <li>
      <a href="../articles/a03_LifeHistoryTraits.html">Deriving life history traits from an MPM</a>
    </li>
    <li>
      <a href="../articles/a04_AgeFromStage.html">Age-from-stage analyses</a>
    </li>
    <li>
      <a href="../articles/a05_SuggestedQualityControl.html">Suggested quality control</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jonesor/Rage/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate a Leslie matrix</h1>
    <small class="dont-index">Source: <a href="https://github.com/jonesor/Rage/blob/HEAD/R/leslie_collapse.R" class="external-link"><code>R/leslie_collapse.R</code></a></small>
    <div class="hidden name"><code>leslie_collapse.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Takes a Leslie matrix and aggregates it to a desired dimension m using least
squares weights equal to the stable age distribution. The output includes the
aggregated matrix, the weight matrix, the original (or expanded) Leslie
matrix raised to the k power, the partitioning matrix, the size of the
original (or expanded) Leslie matrix, the size of the aggregated matrix, the
quotient of the original size divided by the aggregated size, and the
effectiveness of aggregation.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">leslie_collapse</span><span class="op">(</span><span class="va">A</span>, <span class="va">m</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>A</dt>
<dd><p>a Leslie matrix</p></dd>


<dt>m</dt>
<dd><p>the dimensionality of the desired aggregated matrix</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a list including the following elements:</p>
<dl><dt>B</dt>
<dd><p>The aggregated matrix</p></dd>

<dt>W</dt>
<dd><p>The weight matrix</p></dd>

<dt>Ak</dt>
<dd><p>The original (or expanded) Leslie matrix raised to the k power</p></dd>

<dt>S</dt>
<dd><p>The partitioning matrix</p></dd>

<dt>n</dt>
<dd><p>The size of the original (or expanded) Leslie matrix</p></dd>

<dt>m</dt>
<dd><p>The size of the aggregated matrix</p></dd>

<dt>k</dt>
<dd><p>The quotient of the original size divided by the aggregated size</p></dd>

<dt>EFF</dt>
<dd><p>The effectiveness of aggregation</p></dd>

</dl></div>
    <div id="references">
    <h2>References</h2>
    <p>Hinrichsen, R. A. (2023). Aggregation of Leslie matrix models
  with application to ten diverse animal species. Population Ecology, 1–21.
  https://doi.org/10.1002/1438-390X.12149</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other transformation: 
<code><a href="is_leslie_matrix.html">is_leslie_matrix</a>()</code>,
<code><a href="mpm_collapse.html">mpm_collapse</a>()</code>,
<code><a href="mpm_rearrange.html">mpm_rearrange</a>()</code>,
<code><a href="mpm_split.html">mpm_split</a>()</code>,
<code><a href="mpm_standardize.html">mpm_standardize</a>()</code>,
<code><a href="name_stages.html">name_stages</a>()</code>,
<code><a href="repro_stages.html">repro_stages</a>()</code>,
<code><a href="standard_stages.html">standard_stages</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Richard A. Hinrichsen &lt;rich@hinrichsenenvironmental.com&gt;</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">leslie_mpm1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">A</span> <span class="op">&lt;-</span> <span class="va">leslie_mpm1</span><span class="op">$</span><span class="va">matU</span> <span class="op">+</span> <span class="va">leslie_mpm1</span><span class="op">$</span><span class="va">matF</span></span></span>
<span class="r-in"><span><span class="fu">leslie_collapse</span><span class="op">(</span><span class="va">A</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           [,1]     [,2]      [,3]       [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 1.3590360 8.062029 6.9520840 5.59842330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.6989141 0.000000 0.0000000 0.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.0000000 0.458560 0.0000000 0.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.0000000 0.000000 0.1887098 0.03029564</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $W</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           [,1]      [,2]      [,3]       [,4]       [,5]       [,6]        [,7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.8781639 0.0000000 0.0000000 0.00000000 0.00000000 0.00000000 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.0000000 0.4276144 0.0000000 0.00000000 0.00000000 0.00000000 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.0000000 0.0000000 0.1957251 0.00000000 0.00000000 0.00000000 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.0000000 0.0000000 0.0000000 0.08181476 0.00000000 0.00000000 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] 0.0000000 0.0000000 0.0000000 0.00000000 0.02982285 0.00000000 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] 0.0000000 0.0000000 0.0000000 0.00000000 0.00000000 0.00888094 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7,] 0.0000000 0.0000000 0.0000000 0.00000000 0.00000000 0.00000000 0.001949207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [8,] 0.0000000 0.0000000 0.0000000 0.00000000 0.00000000 0.00000000 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              [,8]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.0000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.0000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.0000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.0000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] 0.0000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] 0.0000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7,] 0.0000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [8,] 0.0002926078</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Ak</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0       1        2       3       4        5        6        7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0 0.00000 4.15000 3.790000 3.30500 2.70000 1.990000 1.265000 0.640000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.00000 0.00000 4.415000 4.41500 4.41500 4.415000 4.415000 4.415000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.73289 0.00000 0.000000 0.00000 0.00000 0.000000 0.000000 0.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.00000 0.62914 0.000000 0.00000 0.00000 0.000000 0.000000 0.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.00000 0.00000 0.501038 0.00000 0.00000 0.000000 0.000000 0.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.00000 0.00000 0.000000 0.35694 0.00000 0.000000 0.000000 0.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.00000 0.00000 0.000000 0.00000 0.21492 0.000000 0.000000 0.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 0.00000 0.00000 0.000000 0.00000 0.00000 0.100694 0.032384 0.016384</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    1    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    0    0    1    1    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    0    0    0    0    1    1    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    0    0    0    0    0    0    1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $m</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $k</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $EFF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8227475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Barks, Pol Capdevila, Hal Caswell, Judy P. Che-Castaldo, Richard A. Hinrichsen, John Jackson, Tamora James, Owen Jones, Sam Levin, William K. Petry, Roberto Salguero-Gomez, Iain Stott, Chelsea C. Thomas, Christina M. Hernández, Lotte de Vries, Stefano Giaimo.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

