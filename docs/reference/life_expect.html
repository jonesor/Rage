<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate mean and variance of life expectancy from a matrix population model — life_expect_mean • Rage</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate mean and variance of life expectancy from a matrix population model — life_expect_mean"><meta property="og:description" content="Applies Markov chain approaches to obtain mean and variance of life
expectancy from a matrix population model (MPM)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a01_GettingStarted.html">Getting started with Rage</a>
    </li>
    <li>
      <a href="../articles/a02_VitalRates.html">Deriving vital rates from an MPM</a>
    </li>
    <li>
      <a href="../articles/a03_LifeHistoryTraits.html">Deriving life history traits from an MPM</a>
    </li>
    <li>
      <a href="../articles/a04_AgeFromStage.html">Age-from-stage analyses</a>
    </li>
    <li>
      <a href="../articles/a05_SuggestedQualityControl.html">Suggested quality control</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jonesor/Rage/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate mean and variance of life expectancy from a matrix population model</h1>
    <small class="dont-index">Source: <a href="https://github.com/jonesor/Rage/blob/HEAD/R/life_expect.R" class="external-link"><code>R/life_expect.R</code></a></small>
    <div class="hidden name"><code>life_expect.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Applies Markov chain approaches to obtain mean and variance of life
expectancy from a matrix population model (MPM).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">life_expect_mean</span><span class="op">(</span><span class="va">matU</span>, mixdist <span class="op">=</span> <span class="cn">NULL</span>, start <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">life_expect_var</span><span class="op">(</span><span class="va">matU</span>, mixdist <span class="op">=</span> <span class="cn">NULL</span>, start <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>matU</dt>
<dd><p>The survival component of a MPM (i.e., a square projection matrix
reflecting survival-related transitions; e.g., progression, stasis, and
retrogression). Optionally with named rows and columns indicating the
corresponding life stage names.</p></dd>


<dt>mixdist</dt>
<dd><p>A vector with a length equal to the dimension of the MPM
defining how the function should average the output over the. possible
starting states. See section <em>Starting from multiple stages</em>. If this
argument is used, `start` must be set to `NULL`.</p></dd>


<dt>start</dt>
<dd><p>The index (or stage name) of the first stage of the life cycle
which the user considers to be the beginning of life. Defaults to <code>1</code>.
If set to `NULL` the function returns mean life expectancy from each of the
stages of the MPM.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns life expectancy in the units of the projection interval
  (`ProjectionInterval`) of the MPM. If <code>matU</code> is singular (often
  indicating infinite life expectancy), returns <code>NA</code>.</p>
    </div>
    <div id="starting-from-multiple-stages">
    <h2>Starting from multiple stages</h2>
    

<p>Sometimes, it is necessary to calculate life expectancy considering multiple
starting stage classes instead of just a single stage from which all
individuals begin their lives. This scenario arises when there are several
possible stages at which an individual can start a particular life event,
such as reproductive maturity.
To handle such cases, the function provides support for multiple starting
stage classes. When calculating life expectancy in this context, the outputs
should be averaged using weights determined by the distribution of
individuals across these stages. To achieve this, the `start` argument should
be set to `NULL`, indicating that the starting stage is not specified, and
the `mixdist` argument should be utilized.
In the context described, The `mixdist` argument expects a vector that
represents the proportion of individuals with their first reproduction in
each stage of the MPM. By providing this distribution, the function
calculates the mean lifespan by appropriately weighting the life expectancies
corresponding to each starting stage.
For a practical example that demonstrates this usage, please refer to the
code example below.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Caswell, H. 2001. Matrix Population Models: Construction,
  Analysis, and Interpretation. Sinauer Associates; 2nd edition. ISBN:
  978-0878930968</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other life history traits: 
<code><a href="entropy_d.html">entropy_d</a>()</code>,
<code><a href="entropy_k.html">entropy_k</a>()</code>,
<code><a href="gen_time.html">gen_time</a>()</code>,
<code><a href="longevity.html">longevity</a>()</code>,
<code><a href="net_repro_rate.html">net_repro_rate</a>()</code>,
<code><a href="repro_maturity.html">repro_maturity</a></code>,
<code><a href="shape_rep.html">shape_rep</a>()</code>,
<code><a href="shape_surv.html">shape_surv</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Christine M. Hernández &lt;cmh352@cornell.edu&gt;</p>
<p>Owen R. Jones &lt;jones@biology.sdu.dk&gt;</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mpm1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># mean life expectancy starting from stage class 2</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_mean</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.509116</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># equivalent using named life stages</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_mean</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="st">"small"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.509116</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># mean life expectancies starting from each of the stages</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_mean</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     seed    small   medium    large  dormant </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1.250506 2.509116 3.103368 4.061429 2.142828 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># mean life expectancy starting from first reproduction, where this varies</span></span></span>
<span class="r-in"><span><span class="co"># across individuals</span></span></span>
<span class="r-in"><span><span class="va">rep_stages</span> <span class="op">&lt;-</span> <span class="fu"><a href="repro_stages.html">repro_stages</a></span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matF</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">n1</span> <span class="op">&lt;-</span> <span class="fu"><a href="repro_maturity.html">mature_distrib</a></span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="fl">2</span>, repro_stages <span class="op">=</span> <span class="va">rep_stages</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       seed      small     medium      large    dormant </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.00000000 0.00000000 0.92105263 0.07894737 0.00000000 </span>
<span class="r-in"><span><span class="fu">life_expect_mean</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, mixdist <span class="op">=</span> <span class="va">n1</span>, start <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3.179005</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># variance of life expectancy from stage class 1</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_var</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7816213</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># variance of life expectancy from stage class 1</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_var</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="st">"seed"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7816213</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># variance of life expectancy from each stage class</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_var</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      seed     small    medium     large   dormant </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.7816213 5.9010591 7.3974919 8.6697104 4.8607628 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># variance of life expectancies with a set mixing distribution</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_var</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, mixdist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.0</span>, <span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span><span class="op">)</span>, start <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6.498089</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># setting mixdist to ignore all but one stage should produce the same result</span></span></span>
<span class="r-in"><span><span class="co"># as setting the start argument to that stage</span></span></span>
<span class="r-in"><span><span class="fu">life_expect_mean</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, start <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3.103368</span>
<span class="r-in"><span><span class="fu">life_expect_mean</span><span class="op">(</span><span class="va">mpm1</span><span class="op">$</span><span class="va">matU</span>, mixdist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, start <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3.103368</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Barks, Pol Capdevila, Hal Caswell, Judy P. Che-Castaldo, Richard A. Hinrichsen, John Jackson, Tamora James, Owen Jones, Sam Levin, William K. Petry, Roberto Salguero-Gomez, Iain Stott, Chelsea C. Thomas, Christina M. Hernández.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

